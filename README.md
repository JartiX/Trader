# Игра "Трейдер на один день"

"Трейдер на один день" — это веб-приложение, которое позволяет пользователям попробовать себя в роли трейдера, инвестируя в акции с разными вероятностями роста и падения. Игра обучает основам принятия решений в условиях риска и ограниченных ресурсов.

## Функционал

- **Интерфейс игры:**
  - Выбор акций для инвестирования.
  - Управление капиталом и расчёт доходов/убытков.
  - Анализ сделок по завершению игры.

- **Серверная логика:**
  - Сохранение результатов пользователей с ограничением на частоту запросов.
  - Анализ результатов всех игроков.

- **API эндпоинты:**
  - `GET /` — возвращает стартовую страницу.
  - `POST /save-results` — сохраняет результаты игры пользователя.
  - `GET /get-results` — возвращает список всех сохранённых результатов.
  - `GET /analyze-results` — возвращает анализ всех сохранённых результатов.

## Структура проекта

```
project/
├── server.js          # Серверное приложение на Node.js
├── public/            # Папка с файлами клиента
│   ├── index.html     # Главная HTML-страница
│   ├── style.css      # Стили оформления
│   └── script.js      # Логика клиента
└── README.md          # Описание проекта
```

## Установка и запуск

1. Убедитесь, что у вас установлен [Node.js](https://nodejs.org/).
2. Склонируйте репозиторий или загрузите файлы проекта.
3. Установите зависимости:
   ```bash
   npm install
   ```
4. Запустите сервер:
   ```bash
   node server.js
   ```
5. Откройте браузер и перейдите по адресу: [http://localhost:3000](http://localhost:3000).

## Подробности реализации

### Серверная часть

- **Фреймворк:** Используется [Express.js](https://expressjs.com/).
- **CORS:** Включен для поддержки междоменных запросов.
- **Механизм ограничения:** Ограничение частоты запросов с одного IP-адреса для предотвращения спама.
- **Обработка данных:** Результаты пользователей сохраняются в массиве `savedResults` в формате:
  ```json
  {
    "name": "Имя пользователя",
    "results": [
      {
        "ip": "IP пользователя",
        "finalCapital": "Итоговый капитал",
        "invested": "Всего инвестировано",
        "profitOrLoss": "Прибыль/Убыток",
        "mistakes": "Количество ошибок"
      }
    ]
  }
  ```
- **API:** Эндпоинты для сохранения и анализа данных.

### Клиентская часть

- **HTML:** Файл `index.html` содержит разметку для игры.
- **CSS:** Файл `style.css` отвечает за стилизацию страницы.
- **JavaScript:** Файл `script.js` содержит логику игры, включая:
  - Управление раундами.
  - Расчёт доходности акций.
  - Отправку результатов на сервер.

## Используемые технологии

- **Сервер:** Node.js, Express.js.
- **Клиент:** HTML, CSS, JavaScript.
- **Прочее:** CORS, JSON для передачи данных.

## Пример использования API

### Сохранение результатов
```bash
POST /save-results
Content-Type: application/json

{
  "name": "Игрок 1",
  "finalCapital": 1200,
  "invested": 1000,
  "profitOrLoss": 200,
  "mistakes": 2
}
```
Ответ:
```json
{
  "message": "Результаты сохранены успешно!",
  "data": {
    "name": "Игрок 1",
    "finalCapital": 1200,
    "invested": 1000,
    "profitOrLoss": 200,
    "mistakes": 2
  }
}
```

### Получение всех результатов
```bash
GET /get-results
```
Ответ:
```json
[
  {
    "name": "Игрок 1",
    "results": [
      {
        "ip": "127.0.0.1",
        "finalCapital": 1200,
        "invested": 1000,
        "profitOrLoss": 200,
        "mistakes": 2
      }
    ]
  }
]
```
